#!/bin/bash

chosen="$(echo -e "Connect\nDisconnect\nExit" | dmenu -i)"

case $chosen in
    "Connect")
        wifi_pick="$(nmcli device wifi list | dmenu -l 10 -p "Select Wifi:")"
        bssid=`echo $wifi_pick | cut -d ' ' -f2`

        pass=$(echo "" | dmenu -l 2 -p "Enter Password:")

        [ -z "$bssid" ] && exit 0 || [ -n "$pass" ] && nmcli device wifi connect "$bssid" password "$pass" || nmcli device wifi connect "$bssid"
        ;;
    "Disconnect")
        nmcli device disconnect wlp2s0
        ;;
esac
